(function(){var t,e,n,r,i,a,o,s,u,l,c={}.hasOwnProperty,g=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};angular.module("angular-table",[]),t=function(){function t(t,e){this.attribute=t.attribute,this.title=t.title,this.sortable=t.sortable,this.width=t.width,this.initialSorting=t.initialSorting,e&&(this.customContent=e.customContent,this.attributes=e.attributes,this.width=e.width)}return t.prototype.createElement=function(){var t;return t=angular.element(document.createElement("th"))},t.prototype.renderTitle=function(t){return t.html(this.customContent||this.title)},t.prototype.renderAttributes=function(t){var e,n,r,i,a;if(this.customContent){for(i=this.attributes,a=[],n=0,r=i.length;r>n;n++)e=i[n],a.push(t.attr(e.name,e.value));return a}},t.prototype.renderSorting=function(t){var e;return this.sortable?(t.attr("ng-click","predicate = '"+this.attribute+"'; descending = !descending;"),e=angular.element("<br><span style='margin-left: 10px; cursor:pointer;' class='glyphicon glyphicon-sort' aria-hidden='true' ></span>"),e.attr("ng-class","getSortIcon('"+this.attribute+"', predicate)"),t.append(e)):void 0},t.prototype.renderWidth=function(t){return t.attr("width",this.width)},t.prototype.renderHtml=function(){var t;return t=this.createElement(),this.renderTitle(t),this.renderSorting(t),this.renderAttributes(t),this.renderWidth(t),t},t}(),u=function(){function t(t){this.configObjectName=t,this.itemsPerPage=""+this.configObjectName+".itemsPerPage",this.sortContext=""+this.configObjectName+".sortContext",this.fillLastPage=""+this.configObjectName+".fillLastPage",this.maxPages=""+this.configObjectName+".maxPages",this.currentPage=""+this.configObjectName+".currentPage",this.orderBy=""+this.configObjectName+".orderBy"}return t}(),r=function(){function t(t,e,n){this.scope=t,this.configurationVariableNames=e,this.listName=n}return t.prototype.getList=function(){return this.scope.$eval(this.listName)},t.prototype.getItemsPerPage=function(){return this.scope.$eval(this.configurationVariableNames.itemsPerPage)||10},t.prototype.getCurrentPage=function(){return this.scope.$eval(this.configurationVariableNames.currentPage)||0},t.prototype.getMaxPages=function(){return this.scope.$eval(this.configurationVariableNames.maxPages)||void 0},t.prototype.getSortContext=function(){return this.scope.$eval(this.configurationVariableNames.sortContext)||"global"},t.prototype.setCurrentPage=function(t){return this.scope.$eval(""+this.configurationVariableNames.currentPage+"="+t)},t.prototype.getOrderBy=function(){return this.scope.$eval(this.configurationVariableNames.orderBy)||"orderBy"},t}(),s=function(){function e(t,e){this.tableElement=t,this.attributes=e,this.id=this.attributes.id,this.config=this.attributes.atConfig,this.paginated=null!=this.attributes.atPaginated,this.list=this.attributes.atList,this.createColumnConfigurations()}return e.prototype.capitaliseFirstLetter=function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},e.prototype.extractWidth=function(t){var e;return e=/([0-9]+px)/i.exec(t),e?e[0]:""},e.prototype.isSortable=function(t){var e;return e=/(sortable)/i.exec(t),e?!0:!1},e.prototype.getInitialSorting=function(t){var e;if(e=t.attr("at-initial-sorting")){if("asc"===e||"desc"===e)return e;throw"Invalid value for initial-sorting: "+e+". Allowed values are 'asc' or 'desc'."}return void 0},e.prototype.collectHeaderMarkup=function(t){var e,n,r,i,a,o;for(e={},r=t.find("tr"),o=r.find("th"),i=0,a=o.length;a>i;i++)n=o[i],n=angular.element(n),e[n.attr("at-attribute")]={customContent:n.html(),attributes:n[0].attributes};return e},e.prototype.collectBodyMarkup=function(t){var e,n,r,i,a,o,s,u,l,c,g;for(r=[],g=t.find("td"),l=0,c=g.length;c>l;l++)o=g[l],o=angular.element(o),e=o.attr("at-attribute"),n=o.attr("at-state"),s=o.attr("at-title")||this.capitaliseFirstLetter(o.attr("at-attribute")),a=void 0!==o.attr("at-sortable")||this.isSortable(o.attr("class")),u=this.extractWidth(o.attr("class")),i=this.getInitialSorting(o),r.push({attribute:e,title:s,sortable:a,width:u,initialSorting:i});return r},e.prototype.createColumnConfigurations=function(){var e,n,r,i,a;for(n=this.collectHeaderMarkup(this.tableElement),e=this.collectBodyMarkup(this.tableElement),this.columnConfigurations=[],i=0,a=e.length;a>i;i++)r=e[i],this.columnConfigurations.push(new t(r,n[r.attribute]))},e}(),i=function(){function t(){}return t.prototype.setupTr=function(t,e){var n,r;return n=t.find("tbody"),r=n.find("tr"),r.attr("ng-repeat",e),n},t}(),a=function(t){function e(t,e){this.list=e,this.repeatString="item in "+this.list+" | orderBy:predicate:descending"}return g(e,t),e.prototype.compile=function(t){return this.setupTr(t,this.repeatString)},e.prototype.link=function(){},e}(i),n=function(t){function e(t){this.configurationVariableNames=t,this.repeatString="item in sortedAndPaginatedList"}return g(e,t),e.prototype.compile=function(t){var e,n,r,i,a,o,s;for(n=this.setupTr(t,this.repeatString),a=t.find("td"),i="",o=0,s=a.length;s>o;o++)r=a[o],i+="<td>&nbsp;</td>";e=angular.element(document.createElement("tr")),e.attr("ng-show",this.configurationVariableNames.fillLastPage),e.html(i),e.attr("ng-repeat","item in fillerArray"),n.append(e)},e.prototype.link=function(t,e,n,i){var a,o,s,u,l;return a=this.configurationVariableNames,l=new r(t,a,n.atList),s=function(t,e,n,r,i,a,o,s){var u,l;return t?(l=t,u=n*e-t.length,"global"===i?(l=s(r)(l,a,o),l=s("limitTo")(l,u),l=s("limitTo")(l,n)):(l=s("limitTo")(l,u),l=s("limitTo")(l,n),l=s(r)(l,a,o)),l):[]},o=function(t,e,n,r){var i,a,o,s,u,l,c,g,h,p;if(r=parseInt(r),t.length<=0){for(h=[],o=s=0,l=r-1;l>=0?l>=s:s>=l;o=l>=0?++s:--s)h.push(o);return h}if(e===n-1){if(a=t.length%r,0!==a){for(i=r-a-1,p=[],o=u=c=t.length,g=t.length+i;g>=c?g>=u:u>=g;o=g>=c?++u:--u)p.push(o);return p}return[]}},u=function(){var e;return t.sortedAndPaginatedList=s(l.getList(),l.getCurrentPage(),l.getItemsPerPage(),l.getOrderBy(),l.getSortContext(),t.predicate,t.descending,i),e=Math.ceil(l.getList().length/l.getItemsPerPage()),t.fillerArray=o(l.getList(),l.getCurrentPage(),e,l.getItemsPerPage())},t.$watch(a.currentPage,function(){return u()}),t.$watch(a.itemsPerPage,function(){return u()}),t.$watch(a.sortContext,function(){return u()}),t.$watchCollection(n.atList,function(){return u()}),t.$watch(""+n.atList+".length",function(){return t.numberOfPages=Math.ceil(l.getList().length/l.getItemsPerPage()),u()}),t.$watch("predicate",function(){return u()}),t.$watch("descending",function(){return u()})},e}(i),o=function(){function t(t,e,n){this.element=t,this.tableConfiguration=e,this.configurationVariableNames=n}return t.prototype.constructHeader=function(){var t,e,n,r,i;for(e=angular.element(document.createElement("tr")),i=this.tableConfiguration.columnConfigurations,n=0,r=i.length;r>n;n++)t=i[n],e.append(t.renderHtml());return e},t.prototype.setupHeader=function(){var t,e,n;return e=this.element.find("thead"),e?(t=this.constructHeader(),n=angular.element(e).find("tr"),n.remove(),e.append(t)):void 0},t.prototype.getSetup=function(){return this.tableConfiguration.paginated?new n(this.configurationVariableNames):new a(this.configurationVariableNames,this.tableConfiguration.list)},t.prototype.compile=function(){return this.setupHeader(),this.setup=this.getSetup(),this.setup.compile(this.element)},t.prototype.setupInitialSorting=function(t){var e,n,r,i,a;for(i=this.tableConfiguration.columnConfigurations,a=[],n=0,r=i.length;r>n;n++)if(e=i[n],e.initialSorting){if(!e.attribute)throw"initial-sorting specified without attribute.";t.predicate=e.attribute,a.push(t.descending="desc"===e.initialSorting)}else a.push(void 0);return a},t.prototype.post=function(t,e,n,r){return this.setupInitialSorting(t),t.getSortIcon||(t.getSortIcon=function(e){return e!==t.predicate?"glyphicon glyphicon-sort":t.descending?"glyphicon glyphicon-sort-by-attributes-alt":"glyphicon glyphicon-sort-by-attributes"}),this.setup.link(t,e,n,r)},t}(),e=function(){function t(t,e,n,r){if(this.lowerBound=null!=t?t:0,this.upperBound=null!=e?e:1,null==n&&(n=0),this.length=null!=r?r:1,this.length>this.upperBound-this.lowerBound)throw"sequence is too long";this.data=this.generate(n)}return t.prototype.generate=function(t){var e,n,r,i;for(t>this.upperBound-this.length?t=this.upperBound-this.length:t<this.lowerBound&&(t=this.lowerBound),i=[],e=n=t,r=parseInt(t)+parseInt(this.length)-1;r>=t?r>=n:n>=r;e=r>=t?++n:--n)i.push(e);return i},t.prototype.resetParameters=function(t,e,n){if(this.lowerBound=t,this.upperBound=e,this.length=n,this.length>this.upperBound-this.lowerBound)throw"sequence is too long";return this.data=this.generate(this.data[0])},t.prototype.relocate=function(t){var e;return e=this.data[0]+t,this.data=this.generate(e,e+this.length)},t.prototype.realignGreedy=function(t){var e;return t<this.data[0]?(e=t,this.data=this.generate(e)):t>this.data[this.length-1]?(e=t-(this.length-1),this.data=this.generate(e)):void 0},t.prototype.realignGenerous=function(){},t}(),l="<div style='margin: 0px;'> <ul class='pagination'> <li ng-class='{disabled: getCurrentPage() <= 0}'> <a href='' ng-click='stepPage(-numberOfPages)'>First</a> </li> <li ng-show='showSectioning()' ng-class='{disabled: getCurrentPage() <= 0}'> <a href='' ng-click='jumpBack()'>&laquo;</a> </li> <li ng-class='{disabled: getCurrentPage() <= 0}'> <a href='' ng-click='stepPage(-1)'>&lsaquo;</a> </li> <li ng-class='{active: getCurrentPage() == page}' ng-repeat='page in pageSequence.data'> <a href='' ng-click='goToPage(page)'>{{page + 1}}</a> </li> <li ng-class='{disabled: getCurrentPage() >= numberOfPages - 1}'> <a href='' ng-click='stepPage(1)'>&rsaquo;</a> </li> <li ng-show='showSectioning()' ng-class='{disabled: getCurrentPage() >= numberOfPages - 1}'> <a href='' ng-click='jumpAhead()'>&raquo;</a> </li> <li ng-class='{disabled: getCurrentPage() >= numberOfPages - 1}'> <a href='' ng-click='stepPage(numberOfPages)'>Last</a> </li> </ul> </div>",angular.module("angular-table").directive("atTable",["$filter",function(t){return{restrict:"AC",scope:!0,compile:function(e,n){var r,i,a;return a=new s(e,n),r=new u(n.atConfig),i=new o(e,a,r),i.compile(),{post:function(e,n,r){return i.post(e,n,r,t)}}}}}]),angular.module("angular-table").directive("atPagination",[function(){return{restrict:"E",scope:!0,replace:!0,template:l,link:function(t,n,i){var a,o,s,l,c,g;return a=new u(i.atConfig),g=new r(t,a,i.atList),s=function(t,e,n){return t=Math.max(e,t),Math.min(n,t)},o=function(){return t.numberOfPages},l=function(e){return t.numberOfPages=e},c=function(){var e,n;return g.getList()?g.getList().length>0?(e=Math.ceil(g.getList().length/g.getItemsPerPage()),l(e),n=t.showSectioning()?g.getMaxPages():e,t.pageSequence.resetParameters(0,e,n),g.setCurrentPage(s(g.getCurrentPage(),0,o()-1)),t.pageSequence.realignGreedy(g.getCurrentPage())):(l(1),t.pageSequence.resetParameters(0,1,1),g.setCurrentPage(0),t.pageSequence.realignGreedy(0)):void 0},t.showSectioning=function(){return g.getMaxPages()&&o()>g.getMaxPages()},t.getCurrentPage=function(){return g.getCurrentPage()},t.stepPage=function(e){return e=parseInt(e),g.setCurrentPage(s(g.getCurrentPage()+e,0,o()-1)),t.pageSequence.realignGreedy(g.getCurrentPage())},t.goToPage=function(t){return g.setCurrentPage(t)},t.jumpBack=function(){return t.stepPage(-g.getMaxPages())},t.jumpAhead=function(){return t.stepPage(g.getMaxPages())},t.pageSequence=new e,t.$watch(a.itemsPerPage,function(){return c()}),t.$watch(a.maxPages,function(){return c()}),t.$watch(i.atList,function(){return c()}),t.$watch(""+i.atList+".length",function(){return c()}),c()}}}]),angular.module("angular-table").directive("atImplicit",[function(){return{restrict:"AC",compile:function(t){var e;if(e=t.attr("at-attribute"),!e)throw"at-implicit specified without at-attribute: "+t.html();return t.append("{{item."+e+"}}")}}}]),angular.module("angular-table").directive("atImg",[function(){return{restrict:"AC",compile:function(t){var e;e=t.attr("at-attribute");var n=t.attr("at-state");if(!e)throw"at-implicit specified without at-attribute: "+t.html();return t.append("<a ui-sref='products."+n+".spec({ "+n+"Id: item.id })'><div > <img img-preload class='fade' ng-src='{{item."+e+"}}'></div></a>")}}}]),angular.module("angular-table").directive("atDownload",[function(){return{restrict:"AC",compile:function(t){var e;if(e=t.attr("at-attribute"),!e)throw"at-implicit specified without at-attribute: "+t.html();return t.append("<a target='_blank' href='{{item."+e+"}}'>Download</a>")}}}])}).call(this);
